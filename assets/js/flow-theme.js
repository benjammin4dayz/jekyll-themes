var FlowTheme=function(e){"use strict";class t{static trackPageHash(e,t){const i=new IntersectionObserver((i=>{i.forEach((i=>{if(i.isIntersecting){const s=i.target.getAttribute("id");if(s){window.history.replaceState(null,null,`#${s}`);document.querySelectorAll(e).forEach((e=>{e.classList.remove(t),e.getAttribute("data-target")===s&&e.classList.add(t)}))}}}))}),{threshold:.5});document.querySelectorAll(".page").forEach((e=>{i.observe(e)}))}static lazyLoad(e,t,i){if(!(e=document.getElementById(e)))return console.error("[LazyLoad]: Element not found");let s;new IntersectionObserver(((e,o)=>{e.forEach((e=>{if(e.isIntersecting){const r=e.target;s=setTimeout((()=>{if(!i)throw new Error("[LazyLoad]: Callback function not provided");try{i()}catch(e){throw new Error(`[LazyLoad]: Callback failed: ${e}`)}o.unobserve(r),console.log("[LazyLoad]: "+r.id)}),t)}else clearTimeout(s)}))})).observe(e),console.log(`[LazyLoad]: Waiting to load ${e.id}`)}static get _currentURL(){return window.location.origin.split("//")[1]}}return new class{constructor(){this.source="6a92351396da31b26e2d97f204f3d1a0",this.init()}init(){this.assignHotkey("`",this.spawnOverlay.bind(this))}assignHotkey(e,t){document.addEventListener("keydown",(i=>i.key===e&&t()))}spawnOverlay(){this._fetchHTML().then((()=>{this.overlay=this._makeOverlay(),document.body.appendChild(this.overlay),this._injectHTML(this.overlay)})).catch((e=>console.error(e)))}_makeOverlay(){const e=document.createElement("div");e.id="bnj0--overlay-main";const{style:t}=e;return t.position="fixed",t.top="0",t.left="0",t.right="0",t.bottom="0",t.zIndex="9999",t.display="flex",t.justifyContent="center",t.alignItems="center",t.minWidth="100vw",t.minHeight="100vh",e}_injectHTML(e){e.innerHTML=this.html}_minify(e){return e.replace(/<!--(.*?)-->|\s\B/gm,"")}_fetchHTML(){return new Promise(((e,t)=>{fetch(this.source).then((e=>e.json())).then((t=>{this.html=t.files["overlay.html"].content,e()})).catch((e=>t(e)))}))}set html(e){this._html=`\`${this._minify(e)}\``}get html(){return this._html}set source(e){this._source=`https://api.github.com/gists/${e}`}get source(){return this._source}},new class{constructor(e){this.headerId=e,this.init()}init(){this.origin=this.calculateInitialPosition(),this._onScroll(this.toggleSticky)}calculateInitialPosition(e=this.header){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}toggleSticky(e=window.scrollY){e>this.offsetTop?this._makeSticky():this._makeNotSticky(),e<=this.origin.top&&this._makeNotSticky()}_makeSticky(){this.header.classList.contains("sticky")||(this._createPlaceholder(),this._addClass("sticky"))}_makeNotSticky(){this.header.classList.contains("sticky")&&(this._removePlaceholder(),this._removeClass("sticky"))}_createPlaceholder(){const e=document.createElement("div");e.style.height=`${this.header.offsetHeight}px`,this.header.parentNode.insertBefore(e,this.header),this.placeholder=e}_removePlaceholder(){this.placeholder&&(this.placeholder.parentNode.removeChild(this.placeholder),this.placeholder=null)}_onScroll(e){window.addEventListener("scroll",(()=>e.call(this)))}_addClass(e){this.header.classList.add(e)}_removeClass(e){this.header.classList.remove(e)}set headerId(e){if(e instanceof Element)return this._header=e;const t=document.getElementById(e);t?this._header=t:console.error(`[StickyHeader]: Missing element by ID ${e}`)}get header(){return this._header}get offsetTop(){return this.header.offsetTop}set origin(e){this._origin=e}get origin(){return this._origin}}("landing-nav"),t.trackPageHash(".landing-nav a","active"),e.Utils=t,e}({});
